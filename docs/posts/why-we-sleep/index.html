<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vikrant Mehta">
<meta name="dcterms.date" content="2021-05-16">
<meta name="description" content="Why do we sleep? How do we sleep? What are dreams? Until now, sleep was a mystery. But the developments in technology allow us to answer such questions. In his bestselling book “ Why We Sleep: The New Science of Sleep and Dreams”, neurologist and sleep researcher Matt Walker answers the same questions. He takes us on a journey from ‘Sleep is good’ to ‘How good is sleep?’">

<title>How Good Is Sleep! – Vikrant</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-CKDPXJ4Y38"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-CKDPXJ4Y38', { 'anonymize_ip': true});
</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Sofia&amp;family=WindSong:wght@400;500&amp;display=swap" rel="stylesheet">


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Vikrant</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../dsa/index.html"> 
<span class="menu-text">DSA</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/vikrant-mehta/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/vikrantmehta123"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://leetcode.com/u/vikrantmehta123/"> <i class="bi bi-code" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://lichess.org/@/vikrant-123"> 
<span class="menu-text"><i class="fa-solid fa-chess-queen" aria-label="chess-queen"></i></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">How Good Is Sleep!</h1>
                  <div>
        <div class="description">
          Why do we sleep? How do we sleep? What are dreams? Until now, sleep was a mystery. But the developments in technology allow us to answer such questions. In his bestselling book “ Why We Sleep: The New Science of Sleep and Dreams”, neurologist and sleep researcher Matt Walker answers the same questions. He takes us on a journey from ‘Sleep is good’ to ‘How good is sleep?’
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Books</div>
                <div class="quarto-category">Psychology</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Vikrant Mehta </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 16, 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#part-1" id="toc-part-1" class="nav-link active" data-scroll-target="#part-1">Part 1</a>
  <ul class="collapse">
  <li><a href="#why-do-we-sleep" id="toc-why-do-we-sleep" class="nav-link" data-scroll-target="#why-do-we-sleep">Why Do We Sleep?</a></li>
  <li><a href="#how-do-we-sleep" id="toc-how-do-we-sleep" class="nav-link" data-scroll-target="#how-do-we-sleep">How Do We Sleep?</a></li>
  <li><a href="#who-sleeps" id="toc-who-sleeps" class="nav-link" data-scroll-target="#who-sleeps">Who Sleeps?</a></li>
  </ul></li>
  <li><a href="#part-2" id="toc-part-2" class="nav-link" data-scroll-target="#part-2">Part 2</a>
  <ul class="collapse">
  <li><a href="#sleep-to-learn-and-perform" id="toc-sleep-to-learn-and-perform" class="nav-link" data-scroll-target="#sleep-to-learn-and-perform">Sleep To Learn and Perform</a></li>
  <li><a href="#lack-of-sleep-and-you" id="toc-lack-of-sleep-and-you" class="nav-link" data-scroll-target="#lack-of-sleep-and-you">Lack of Sleep and You</a></li>
  </ul></li>
  <li><a href="#part-3" id="toc-part-3" class="nav-link" data-scroll-target="#part-3">Part 3</a>
  <ul class="collapse">
  <li><a href="#how-do-we-dream" id="toc-how-do-we-dream" class="nav-link" data-scroll-target="#how-do-we-dream">How Do We Dream?</a></li>
  <li><a href="#do-dreams-have-a-meaning" id="toc-do-dreams-have-a-meaning" class="nav-link" data-scroll-target="#do-dreams-have-a-meaning">Do Dreams Have a Meaning?</a></li>
  <li><a href="#why-do-we-dream" id="toc-why-do-we-dream" class="nav-link" data-scroll-target="#why-do-we-dream">Why Do We Dream?</a></li>
  <li><a href="#can-you-control-your-dreams" id="toc-can-you-control-your-dreams" class="nav-link" data-scroll-target="#can-you-control-your-dreams">Can You Control Your Dreams?</a></li>
  </ul></li>
  <li><a href="#sleep-tips" id="toc-sleep-tips" class="nav-link" data-scroll-target="#sleep-tips">Sleep Tips</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>What if someone told you that there exists a pill that is for free and it will make you live long, and be healthy and smart? I would jump right at it! But that pill is always with us and it is for free. It’s called <em>sleep</em>.</p>
<p>In this post, I have summarized the book and the key learnings from the book. You can also listen to the audio summary on the <em>Booklet</em> app. Be sure to check out <em><a href="#sleep-tips">sleep tips</a></em>.</p>
<section id="part-1" class="level2">
<h2 class="anchored" data-anchor-id="part-1">Part 1</h2>
<section id="why-do-we-sleep" class="level3">
<h3 class="anchored" data-anchor-id="why-do-we-sleep">Why Do We Sleep?</h3>
<p>How do we know that it’s time to sleep? There are two reasons: Circadian Rhythm and Sleep Pressure.</p>
<p>Your body has its own clock. It tells you when to do what. It will tell you when to sleep, when to eat, when to drink. This is called the circadian rhythm, which is different for everyone. That’s why there are people who like staying up late at night and wake up late, and also those who go to bed early and get up early. None of the two is wrong, they’re just different.</p>
<p>The other half of the answer is something called Sleep Pressure. With each wakeful moment, a chemical called ‘ Adenosine’ gets accumulated in your brain. When enough Adenosine gets accumulated, you feel sleepy. This is called ‘ Sleep Pressure.’ When you are awake for the whole day( 12 to 16 hours), there is enough Adenosine to make you sleepy. And a sleep of eight hours is good enough to remove this Adenosine from the brain.</p>
<p>When the circadian rhythm and sleep pressure coordinate, you feel a strong urge to sleep. That’s why we go to bed every night.</p>
</section>
<section id="how-do-we-sleep" class="level3">
<h3 class="anchored" data-anchor-id="how-do-we-sleep">How Do We Sleep?</h3>
<p>Researchers carefully observed sleeping babies ( cute, right?). What they found was that their eyeballs don’t remain still all the time. There are periods when the eyeballs move around rapidly, and there are periods when the eyeballs remain still. This happens with adults too. The researchers named these two periods as REM sleep ( Rapid Eye Movement) which is when you dream, and NREM ( Non Rapid Eye Movement) which is when you are in deep sleep.</p>
<p>The brain waves in REM are no different from your brain waves right now. It is when your body is paralysed, but your brain waves show very high activity. And because your body is paralysed, you don’t act on your dreams.</p>
</section>
<section id="who-sleeps" class="level3">
<h3 class="anchored" data-anchor-id="who-sleeps">Who Sleeps?</h3>
<p>Every organism on the planet that has a lifespan of more than a few days, enjoys sleep or sleep-like activity, right from unicellular bacteria to giants like whales. There are fascinating stories in the animal kingdom about sleep. Let’s take dolphins as an example. They need to float in water, and at the same time, they need to keep an eye out for predators. How would they sleep? Their brain takes turns in sleeping. First, one half of the brain falls into deep NREM sleep. After it has had a healthy sleep, the other half of the brain sleeps, which means they can function good enough with just one brain. And, when they are awake, both halves of their brain work in perfect coordination. Imagine having that as a superpower!</p>
</section>
</section>
<section id="part-2" class="level2">
<h2 class="anchored" data-anchor-id="part-2">Part 2</h2>
<p>Sleep offers so many benefits, from health to memory, from immunity to performance, that the question to ask is not ‘ Why do we sleep?’ But rather ‘ Why did we ever wake up?’ What are those benefits of sleep? Can lack of sleep kill?</p>
<section id="sleep-to-learn-and-perform" class="level3">
<h3 class="anchored" data-anchor-id="sleep-to-learn-and-perform">Sleep To Learn and Perform</h3>
<p>In a study, participants were asked to learn some facts. One group was allowed to take a nap afterwards, while the other group wasn’t. Later, both groups were again given some new facts to learn. The group which was allowed to take a nap performed 20 percent better at learning new info than the group which didn’t get to sleep.</p>
<p>Our short term info is stored in a brain region called the Hippocampus, whose storage capacity is small. Sleep frees up space in your brain to learn new information by transferring this info to a long term storage site which is the cortex, which can store huge amounts of information. At the same time, we remember better, since the information is safe in the cortex. Sleep transfers the files and hits the save button. It doesn’t matter whether you’re studying for a history test or trying to perfect a tennis backhand: Sleep will aid your learning. But we don’t need to remember yesterday’s menu or what clothes you wore yesterday, right? Sleep helps you forget such unimportant things. It clears the clutter from your brain. That means, sleep helps you to learn and to forget too.</p>
<p>One fun fact: If you tell your brain to remember a particular thing, and then go to sleep, your sleeping brain will selectively choose that thing to transfer and save. How cool is that!</p>
</section>
<section id="lack-of-sleep-and-you" class="level3">
<h3 class="anchored" data-anchor-id="lack-of-sleep-and-you">Lack of Sleep and You</h3>
<p>In a study, researchers checked the concentration levels of people with 8, 6 ,4 and no hours of sleep for a few days. The first group slept for 8 hours and was the best performer. The second group slept for 6 hours, and it was the second best. The group with 4 hours of sleep was the third. And as we can guess, the group with no sleep performed the worst.</p>
<p>For the people who slept less than eight hours, the performance gradually worsened. And this worsening didn’t stop, it never stops. You keep on performing worse and worse each day.</p>
<p>The main thing to worry about is not the lack of concentration but rather, it is that we fail to realise that our concentration has dropped. Not a single person in the above experiment accepted the fact that his concentration has dropped. The low levels of concentration become the norm, and we start underperforming.</p>
<p>Lack of sleep has ties with diseases, from heart attacks to diabetes, from cancer to mental disorders. In fact, there is not a single psychiatric disorder where sleep disturbance is not a symptom.</p>
<p>Here, we’re not talking about extreme cases of sleep deprivation, but routinely getting just 5-6 hours of sleep. Can such sleep deprivation kill you? Yes! Combine sleep deprivation with a setback, and you have a recipe for suicidal thoughts or addictions. Combine sleep deprivation with driving, and you have a recipe for a car accident. The rule of thumb is : If you want to live longer and healthier, do not mess with sleep.</p>
</section>
</section>
<section id="part-3" class="level2">
<h2 class="anchored" data-anchor-id="part-3">Part 3</h2>
<p>We haven’t yet talked about dreams. So what are dreams? How do we dream? Do dreams have a meaning?</p>
<section id="how-do-we-dream" class="level3">
<h3 class="anchored" data-anchor-id="how-do-we-dream">How Do We Dream?</h3>
<p>REM sleep is when you dream. When you enter REM sleep, which is about 5 times every night ( you enter NREM sleep 5 times also), there is a great increase in the activity of some brain areas, while there is a sharp decrease in activity of some other areas.</p>
<p>The areas of the brain that show great increase in activity are the ones which are associated with movement, emotions, memory, and visual areas. This is why, when we dream, we dream of things with past experiences or things with strong emotions or we see dreams in great detail.</p>
<p>And the ones that show a great decrease are the ones which control rational thinking. This is why dreams don’t have any connection to reality, as the logical brain is turned off during this period.</p>
</section>
<section id="do-dreams-have-a-meaning" class="level3">
<h3 class="anchored" data-anchor-id="do-dreams-have-a-meaning">Do Dreams Have a Meaning?</h3>
<p>We have myths around saying that dreams have meaning or dreams predict the future. In reality, the dreams do not have any meaning. They have functions but they don’t have meaning.</p>
</section>
<section id="why-do-we-dream" class="level3">
<h3 class="anchored" data-anchor-id="why-do-we-dream">Why Do We Dream?</h3>
<p>Although dreams don’t have meaning, they have functions. Not just one, but multiple ones! To know the first function, the researchers looked at patients with depression. They were depressed due divorces, or break ups. The researchers collected their dream reports for a whole year. The people who reported having dreams which were related to their cause of depression ( due to divorces, etc.), were free of all symptoms. They didn’t have depression anymore. But the people whose dreams weren’t related to their cause, showed a very small change in symptoms. The first function of dreams is that they reduce the intensity of experiences. Have you ever had a scary experience? If you think of it now, you probably won’t feel it intensely. That’s probably because of dreams!</p>
<p>Due to REM sleep, we are also more accurate in reading facial expressions and emotions in other people. Our Emotional Quotient is at its best when we get our REM sleep.</p>
<p>We all have studied the periodic table in school. Dmitri Mendeleev was the person who organised the elements in the periodic table. But he had to fail before he could succeed in organising the elements. He felt that there was some logic, some order behind all the elements in the world. He was so obsessed over the problem that he tried to solve it for years. And every time he tried, he failed. He would have quit, if it was not for a dream. He saw very clearly in his dream, all the elements arranged in a perfect logical order. He woke up immediately and wrote it down. He had solved the mystery of organising elements. We still use the same order even today.</p>
<p>That’s what dreams do. In the REM sleep, the brain takes all the information it has acquired, and arranges it in proper shelves. So we can connect, rearrange and understand the information better. All this reflects in creativity; we are more creative if we have healthy REM sleep.</p>
<p>This function of REM sleep really blew my mind away: Researchers gave a group of people a few anagrams ( a word where letters are jumbled. Eg: Ltbtoe for Bottle ). First, the group was asked to solve anagrams before they went to sleep. Then the researchers woke them up twice in their NREM sleep and twice in their REM sleep for a very short period, and gave them some other anagrams to solve. when the participants were woken up from REM sleep, they performed up to 30% better than NREM sleep as well as when they were awake. Problem solving is a fascinating function that REM sleep, and dreams perform. The answers will just come naturally to you.</p>
</section>
<section id="can-you-control-your-dreams" class="level3">
<h3 class="anchored" data-anchor-id="can-you-control-your-dreams">Can You Control Your Dreams?</h3>
<p>There may be some of you who can control your dreams. Most of us cannot control dreams but some of us can. But even the scientists are confused about whether you should or should not control your dreams.</p>
</section>
</section>
<section id="sleep-tips" class="level2">
<h2 class="anchored" data-anchor-id="sleep-tips">Sleep Tips</h2>
<p>This book is an eye- opener that convinces us to close our eyes. Here are a few tips for you to help you close your eyes better:</p>
<ol type="1">
<li>Make a sleep schedule. Do the same activities before you go to sleep everyday.</li>
<li>Go out in the sunlight. Your body clock will run on schedule.</li>
<li>Avoid caffeine and alcohol, at least seven hours before sleep.</li>
<li>Don’t drink too many fluids and don’t eat a heavy dinner.</li>
<li>Don’t take a nap after 3 pm.</li>
<li>Exercise but not right before sleep.</li>
<li>Don’t use your screens at least an hour before sleep.</li>
<li>Take a hot bath before bed.</li>
<li>Have a dark bedroom.</li>
<li>Don’t lie in bed awake. If you can’t sleep, get out of bed and do something that relaxes you (like reading).</li>
</ol>
<p>I have fallen in love with sleep because of this book. For the first time, I will sleep for a long time without having regrets later!</p>
<hr>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>